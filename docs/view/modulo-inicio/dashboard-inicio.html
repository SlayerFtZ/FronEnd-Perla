<!DOCTYPE html>
<html lang="en">

<head>
  <meta name="description"
    content="Vali is a responsive and free admin theme built with Bootstrap 5, SASS and PUG.js. It's fully customizable and modular.">
  <!-- Twitter meta-->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:site" content="@pratikborsadiya">
  <meta property="twitter:creator" content="@pratikborsadiya">
  <!-- Open Graph Meta-->
  <meta property="og:type" content="website">
  <meta property="og:site_name" content="Vali Admin">
  <meta property="og:title" content="Vali - Free Bootstrap 5 admin theme">
  <meta property="og:url" content="http://pratikborsadiya.in/blog/vali-admin">
  <meta property="og:image" content="http://pratikborsadiya.in/blog/vali-admin/hero-social.png">
  <meta property="og:description"
    content="Vali is a responsive and free admin theme built with Bootstrap 5, SASS and PUG.js. It's fully customizable and modular.">
  <title>Centro Comercial La Perla</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Main CSS-->
  <link rel="stylesheet" type="text/css" href="../../css/main.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
  <!-- Font-icon css-->
  <link rel="stylesheet" type="text/css"
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</head>

<body class="app sidebar-mini">
  <!-- Navbar-->
  <header class="app-header"><a class="app-header__logo">La perla</a>
    <!-- Sidebar toggle button--><a class="app-sidebar__toggle" href="#" data-toggle="sidebar"
      aria-label="Hide Sidebar"></a>
    <!-- Navbar Right Menu-->
    <ul class="app-nav">

      </li>
      <!--Notification Menu-->
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown"
          aria-label="Show notifications"><i class="bi bi-bell fs-5"></i></a>
        <ul class="app-notification dropdown-menu dropdown-menu-right">
          <li class="app-notification__title">Tiene 4 notificaciones nuevas.</li>
          <div class="app-notification__content">
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-envelope fs-4 text-primary"></i></span>
                <div>
                  <p class="app-notification__message">Abono de renta vencido</p>

                </div>
              </a></li>
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-exclamation-triangle fs-4 text-warning"></i></span>
                <div>
                  <p class="app-notification__message">Renta proxima</p>

                </div>
              </a></li>
            <li><a class="app-notification__item" href="javascript:;"><span class="app-notification__icon"><i
                    class="bi bi-cash fs-4 text-success"></i></span>
                <div>
                  <p class="app-notification__message">Abono realizado</p>

                </div>
              </a></li>
          </div>
        </ul>
      </li>
      <!-- User Menu-->
      <li class="dropdown"><a class="app-nav__item" href="#" data-bs-toggle="dropdown" aria-label="Open Profile Menu"><i
            class="bi bi-person fs-4"></i></a>
        <ul class="dropdown-menu settings-menu dropdown-menu-right">
          <li><a class="dropdown-item" href="../modulo-configuracion/actualizar-iconoEmpresa.html"><i
                class="bi bi-gear me-2 fs-5"></i>
              Configuraciones</a>
          </li>
          <li><a class="dropdown-item" href="../modulo-usuario/perfil-usuario.html"><i
                class="bi bi-person me-2 fs-5"></i>
              Perfil de usuario</a></li>
          <li><a class="dropdown-item" id="logoutBtn"><i class="bi bi-box-arrow-right me-2 fs-5"></i>
              Cerrar sesión</a></li>
        </ul>
      </li>
    </ul>
  </header>
  <!-- Sidebar menu-->
  <div class="app-sidebar__overlay" data-toggle="sidebar"></div>
  <aside class="app-sidebar">
    <div class="app-sidebar__user">
      <img class="app-sidebar__user-avatar" id="user-avatar" src="../../images/perfilUsuario.jpg" alt="User Image">
      <div>
        <p class="app-sidebar__user-name" id="user-name">Acceso Denegado</p>
        <p class="app-sidebar__user-designation" id="user-role">Inicia Sesion</p>
      </div>
    </div>
    <ul class="app-menu">

      <!--Navegacion a el dashboard -->
      <li><a class="app-menu__item active" href="../modulo-inicio/dashboard-inicio.html"><i
            class="app-menu__icon bi bi-speedometer"></i><span class="app-menu__label">Dashboard</span></a>
      </li>

      <!-- Navegacion y menu para Usuarios -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-people-fill"></i><span class="app-menu__label">. Usuarios</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-usuario/perfil-usuario.html"><i
                class="bi bi-person-bounding-box"></i>.
              Perfil de usuario</a></li>
          <li><a class="treeview-item" href="../modulo-usuario/agregar-usuario.html"><i class="bi bi-person-add"></i>.
              Agregar
              Usuarios</a></li>
          <li><a class="treeview-item" href="../modulo-usuario/consultar-usuario.html" rel="noopener"><i
                class="bi bi-search"></i>. Buscar
              usuario</a></li>
          <li><a class="treeview-item" href="../modulo-usuario/agregar-perfil-salud.html"><i
                class="bi bi-person-heart"></i>.
              Perfil de
              salud</a></li>
          <li><a class="treeview-item" href="../modulo-usuario/agregar-contacto-emergencia.html"><i
                class="bi bi-telephone-outbound"></i>.
              Contacto de emergencia</a></li>
        </ul>
      </li>
      <!-- Navegacion y menu para locales -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-house-check-fill"></i><span class="app-menu__label">. Locales</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-local/agregar-local.html"><i class="bi bi-building-add"></i>.
              Agregar
              local</a></li>
          <li><a class="treeview-item" href="../modulo-local/actualizar-local.html"><i
                class="bi bi-building-add"></i></i>.
              Actualizar local</a></li>
          <li><a class="treeview-item" href="../modulo-local/consultar-local.html"><i class="bi bi-search"></i>. Buscar
              local</a></li>
        </ul>
      </li>

      <!-- Navegacion y menu para rentas -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-postcard-fill"></i><span class="app-menu__label">. Rentas</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-renta/agregar-renta.html"><i class="bi bi-postcard-fill"></i>.
              Agregar
              rentas</a></li>
          <li><a class="treeview-item" href="../modulo-renta/actualizar-renta.html"><i class="bi bi-key"></i></i>.
              Actualizar renta</a></li>
          <li><a class="treeview-item" href="../modulo-renta/buscar-renta.html"><i class="bi bi-search"></i></i>.
              Buscar renta</a></li>
        </ul>
      </li>

      <!-- Navegacion y menu para Juegos -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-controller"></i><span class="app-menu__label">. Juegos</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-juego/agregar-juego.html"><i class="bi bi-controller"></i>.
              Agregar
              juego</a></li>
          <li><a class="treeview-item" href="../modulo-juego/actualizarJuego.html" rel="noopener"><i
                class="bi bi-controller"></i>
              . Actualizar Juego</a></li>
        </ul>
      </li>

      <!-- Ingresos -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-currency-dollar"></i><span class="app-menu__label">. Ingresos</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-ingresos/agregar-Ingreso.html"><i class="bi bi-controller"></i>.
              Agregar
              juego</a></li>
          <li><a class="treeview-item" href="../modulo-ingresos/consultar-ingreso.html" rel="noopener"><i
                class="bi bi-controller"></i>
              . Consultar ingreso de juego</a></li>
        </ul>
      </li>

      <!-- Navegacion y menu para Reparaciones -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-house-gear-fill"></i><span class="app-menu__label">. Reparaciones</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-reparaciones/agregar-reparacion.html"><i
                class="bi bi-gear-wide-connected"></i>. Agregar
              reparacion</a></li>
          <li><a class="treeview-item" href="../modulo-reparaciones/consultar-reparacion.html" rel="noopener"><i
                class="bi bi-search"></i>.
              Buscar reparacion</a></li>
        </ul>
      </li>


      <!-- Navegacion y menu para Reportes -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-file-earmark-pdf-fill"></i><span class="app-menu__label">. Reportes</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">

        </ul>
      </li>

      <!-- Navegacion y menu para Pagos extras -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-cash-coin"></i><span class="app-menu__label">. Pagos extras</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>

        <ul class="treeview-menu">
        </ul>

      </li>

      <ul class="treeview-menu">

      </ul>
      </li>
      <!-- Navegacion y menu para CONFIGURACIONES  -->
      <li class="treeview"><a class="app-menu__item" href="#" data-toggle="treeview"><i
            class="bi bi-gear-wide-connected"></i><span class="app-menu__label">. Configuraciones</span><i
            class="treeview-indicator bi bi-chevron-right"></i></a>
        <ul class="treeview-menu">
          <li><a class="treeview-item" href="../modulo-configuracion/actualizar-iconoEmpresa.html"><i
                class="bi bi-card-image"></i>.
              Cambiar Icono</a></li>
      </li>
    </ul>
  </aside>

  <main class="app-content">
    <div class="app-title">
      <div>
        <h1 class="titulo-de-pagina"><i class="bi bi-speedometer"></i> Dashboard</h1>
        <p>"SISTEMA DE ADMINISTRACION DEL CENTRO COMERCIAL LA PERLA"</p>
      </div>
      <ul class="app-breadcrumb breadcrumb">
        <li class="breadcrumb-item"><i class="bi bi-house-door fs-6"></i></li>
        <li class="breadcrumb-item"><a href="../modulo-inicio/dashboard-inicio.html">Inicio</a></li>
      </ul>
    </div>
    <div class="row">
      <div class="col-md-6 col-lg-3">
        <div class="widget-small primary coloured-icon"><i class="icon bi bi-people fs-1"></i>
          <div class="info">
            <h4>Total Socios</h4>
            <p><b>5</b></p>
          </div>
        </div>
        <div class="widget-small primary coloured-icon"><i class="icon bi bi-people fs-1"></i>
          <div class="info">
            <h4>Empleados</h4>
            <p><b>5</b></p>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3">
        <div class="widget-small info coloured-icon"><i class="icon bi bi-cash fs-1"></i>
          <div class="info">
            <h4>Ingresos del mes</h4>
            <p><b>25</b></p>
          </div>
        </div>
        <div class="widget-small info coloured-icon"><i class="icon bi bi-cash fs-1"></i>
          <div class="info">
            <h4>Total de ingresos renta del mes</h4>
            <p><b>25</b></p>
          </div>
        </div>
      </div>
      <div class="col-md-6 col-lg-3">
        <div class="widget-small warning coloured-icon"><i class="icon bi bi-box-arrow-up-right fs-1"></i>
          <div class="info">
            <h4>Administradrores</h4>
            <p><b>10</b></p>
          </div>
        </div>
        <div class="widget-small warning coloured-icon"><i class="icon bi bi-box-arrow-up-right fs-1"></i>
          <div class="info">
            <h4>Total de ingreso de juegos</h4>
            <p><b>10</b></p>
          </div>
        </div>
      </div>
      
      <div class="col-md-6 col-lg-3">
        <div class="widget-small danger coloured-icon"><i class="icon bi bi-tools fs-1"></i>
          <div class="info">
            <h4>REPARACIONES DEL MES</h4>
            <p><b>500</b></p>
          </div>
        </div>
        <div class="widget-small danger coloured-icon"><i class="icon bi bi-tools fs-1"></i>
          <div class="info">
            <h4>Total REPARACIONES DEL MES</h4>
            <p><b>500</b></p>
          </div>
        </div>
      </div>
      
    </div>
    <div class="row">
      <div class="col-md-6">
        <div class="tile">
          <h3 class="tile-title">INGRESOS ANUALES</h3>
          <div class="ratio ratio-16x9">
            <div id="salesChart"></div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="tile">
          <h3 class="tile-title">INGRESO DEL MES POR AREA</h3>
          <div class="ratio ratio-16x9">
            <div id="supportRequestChart"></div>
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <div class="tile">
          <h3 class="tile-title">GASTOS DE MANTENIMIENTO</h3>
          <div class="ratio ratio-16x9">
            <div id="gastosMantenimiento"></div>
          </div>
        </div>
      </div>
      <div class="col-md-6">
        <div class="tile">
          <h3 class="tile-title">EGRESOS ANUALES</h3>
          <div class="ratio ratio-16x9">
            <div id="egresosAnual"></div>
          </div>
        </div>
        
      </div>
      
    </div>

    <!-- <div class="container mt-4">
      <div class="row">
        <div class="col-12">
          <div class="tile">
            <h3 class="tile-title">UBICACIONES</h3>
            <div class="ratio ratio-16x9">
              <!-- Aseguramos que el contenedor tenga un tamaño suficiente para el mapa -->
              <!-- <div id="map" style="height: 100%; width: 100%;"></div>
            </div>
          </div>
        </div>
      </div>
<<<<<<< HEAD
    </div> --> 




=======
    </div>
>>>>>>> Rama-Felix
  </main>
  <!-- Essential javascripts for application to work-->
  <script src="../../js/jquery-3.7.0.min.js"></script>
  <script src="../../js/bootstrap.min.js"></script>
  <script src="../../js/main.js"></script>
  <!-- Page specific javascripts-->
  <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
  <script type="text/javascript">
    const salesData = {
      xAxis: {
        type: 'category',
        data: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
      },
      yAxis: {
        type: 'value',
        axisLabel: {
          formatter: '${value}'
        }
      },
      series: [
        {
          data: [1200, 1500, 1800, 1300, 1700, 2000, 1900, 2200, 2500, 2700, 3000, 2000],
          type: 'bar',
          itemStyle: {
            color: function (params) {
              const colors = ['#ff9e80', '#a3ffb0', '#a3b8ff', '#ff99d5', '#d8a3ff', '#a3fff9', '#fbff99', '#ffbf80', '#c5ff99', '#99c5ff', '#ff99bf', '#99ffd8'];

              return colors[params.dataIndex];
            }
          }
        }
      ],
      tooltip: {
        trigger: 'axis',
        formatter: "<b>{b0}:</b> ${c0}"
      }
    }

    const supportRequests = {
      tooltip: {
        trigger: 'item',
        formatter: "<b>{b}:</b> ${c}"
      },
      legend: {
        orient: 'vertical',
        left: 'left'
      },
      series: [
        {
          name: 'Support Requests',
          type: 'pie',
          radius: '50%',
          data: [
            { value: 4800, name: 'Juegos' },
            { value: 5000, name: 'Rentas' },
            { value: 1000, name: 'Extras' }
          ],
          emphasis: {
            itemStyle: {
              shadowBlur: 10,
              shadowOffsetX: 0,
              shadowColor: 'rgba(0, 0, 0, 0.5)'
            }
          }
        }
      ]
    };


    const salesChartElement = document.getElementById('salesChart');
    const salesChart = echarts.init(salesChartElement, null, { renderer: 'svg' });
    salesChart.setOption(salesData);
    new ResizeObserver(() => salesChart.resize()).observe(salesChartElement);

    const supportChartElement = document.getElementById("supportRequestChart");
    const supportChart = echarts.init(supportChartElement, null, { renderer: 'svg' });
    supportChart.setOption(supportRequests);
    new ResizeObserver(() => supportChart.resize()).observe(supportChartElement);
  </script>

  <!-- Incluye ECharts -->
  <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      var egresosChart = echarts.init(document.getElementById("egresosAnual"));
      var egresosOption = {

        tooltip: { trigger: "axis" },
        xAxis: {
          type: "category",
          data: ["Enero", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic"]
        },
        yAxis: { type: "value" },
        series: [
          {
            name: "Egresos",
            type: "bar",
            data: [1200, 1500, 1800, 1300, 1600, 1700, 2000, 2200, 2100, 1900, 1800, 2500],
            itemStyle: { color: "#ff5733" }
          }
        ]
      };

      egresosChart.setOption(egresosOption);

      var mantenimientoChart = echarts.init(document.getElementById("gastosMantenimiento"));
      var mantenimientoOption = {
        tooltip: { trigger: "axis" },
        legend: { data: ['Reparaciones', 'Servicios', 'Materiales', 'Otros'], left: 'left' },
        xAxis: {
          type: 'category',
          data: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
        },
        yAxis: { type: 'value' },
        series: [
          {
            name: 'Reparaciones',
            type: 'line',
            data: [300, 400, 500, 450, 600, 650, 700, 750, 800, 850, 900, 950],
            smooth: true, // Línea suave
            color: '#ff5733'
          },
          {
            name: 'Servicios',
            type: 'line',
            data: [200, 250, 300, 350, 400, 420, 440, 480, 510, 550, 580, 600],
            smooth: true,
            color: '#33ff57'
          },
          {
            name: 'Materiales',
            type: 'line',
            data: [150, 200, 220, 250, 280, 300, 320, 340, 360, 380, 400, 420],
            smooth: true,
            color: '#3357ff'
          },
          {
            name: 'Otros',
            type: 'line',
            data: [100, 120, 150, 180, 200, 210, 230, 250, 270, 290, 310, 330],
            smooth: true,
            color: '#FF00C8FF'
          }
        ]
      };
      mantenimientoChart.setOption(mantenimientoOption);
    });
  </script>

  <!-- Incluir el archivo JS de Leaflet -->
  <script src="../../js/plugins/leaflet.js"></script>

  <script>
    var map = L.map('map').setView([19.817114965266097, -97.35986734768879], 10);

    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '© OpenStreetMap'
    }).addTo(map);
    var Laperla = L.marker([19.817114965266097, -97.35986734768879]).bindPopup('Centro comercial La perla, centro comercial la Perla, Av. Benito Juárez S/N-Local 69, Centro, 73800 Teziutlán, Pue.').addTo(map);
    var ConstruramaTubyco = L.marker([19.818182744404755, -97.358894744056882]).bindPopup('Construrama Tubyco Suc. Teziutlan, 73800, Allende 503, Centro, Teziutlán, Pue.').addTo(map);
    var MaterialesCarmen = L.marker([19.81852246666271, -97.3587055911554]).bindPopup('Materiales el Carmen, Zaragoza 411A, Centro, 73800 Teziutlán, Pue.').addTo(map);
    var HerreriaPlomeria = L.marker([19.821695644212074, -97.35931768978635]).bindPopup('Herrería plomería y electricidad, Nigromante 9, Centro, 73800 Teziutlán, Pue.').addTo(map);
    var FerreteraCatorsa = L.marker([19.81920769217201, -97.36072305761097]).bindPopup('Ferretera Catorsa, Lerdo 701, Centro, 73800 Teziutlán, Pue.').addTo(map);

    var circle = L.circle([19.817114965266097, -97.35986734768879], {
      color: '#30f',
      fillColor: 'yellow',
      fillOpacity: 0.5,
      radius: 300
    }).addTo(map);
    circle.bindPopup("Área de influencia de Denver").openPopup();

    function encontrarUsuario() {
      if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
          var userLat = position.coords.latitude;
          var userLon = position.coords.longitude;
          var userMarker = L.marker([userLat, userLon]).addTo(map);
          userMarker.bindPopup('Tu ubicación').openPopup();
          map.setView([userLat, userLon], 13);
        }, function () {
          alert("No se pudo obtener la ubicación del usuario.");
        });
      } else {
        alert("La geolocalización no es compatible con este navegador.");
      }
    }
    // Llamar a la función para ubicar al usuario
    encontrarUsuario();
  </script>

  <script>

    document.addEventListener("DOMContentLoaded", function () {
      // Verificar si el usuario tiene token, id y rol en el localStorage
      const token = localStorage.getItem("token");
      const id = localStorage.getItem("id");
      const rol = localStorage.getItem("rol");

      // Si no hay token, id o rol, redirigir al login
      if (!token || !id || !rol) {
        window.location.href = "../../view/modulo-login/page-login.html"; // Si no hay token, id o rol, redirigir al login
      }
    });

    document.getElementById("logoutBtn").addEventListener("click", function () {
      localStorage.clear();  // Limpia todo el localStorage
      sessionStorage.clear(); // Limpia todo el sessionStorage
      window.location.href = "../modulo-login/page-login.html"; // Redirige al login
    });

  </script>
  <script src="../../controller/inicio/menuUsuarioController.js"></script>
</body>

</html>